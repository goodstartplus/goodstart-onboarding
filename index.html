<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding Goodstart+</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 🚀 Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar"></div>
    </div>

    <!-- 1. Intro Video -->
    <section id="intro-video-screen" class="screen">
        <video src="assets/videos/pronunciation.mp4" autoplay muted></video>
        <button id="continue-intro" onclick="nextScreen('name-screen')">Continuar</button>
    </section>

    <!-- 2. Name Input -->
    <section id="name-screen" class="screen hidden">
        <h2>Qual é o seu nome?</h2>
        <input type="text" id="user-name" placeholder="Digite seu nome">
        <button onclick="saveName()">Continuar</button>
    </section>

    <!-- 3. Age Selection -->
    <section id="age-screen" class="screen hidden">
        <h2>Quantos anos você tem?</h2>
        <button onclick="saveAnswer('idade', '<18')">Menos de 18</button>
        <button onclick="saveAnswer('idade', '18-25')">18-25</button>
        <button onclick="saveAnswer('idade', '26-35')">26-35</button>
        <button onclick="saveAnswer('idade', '36+')">36+</button>
    </section>

    <!-- 4. Study Method -->
    <section id="study-method-screen" class="screen hidden">
        <h2>Como você estudou inglês?</h2>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Ensino Fundamental/Médio">
            🎒 Ensino Fundamental/Médio
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Escola de Idiomas">
            🎓 Escola de Idiomas
        </div>
        <button onclick="saveCheckboxes('study-method')">Continuar</button>
    </section>

    <!-- 5. Challenges -->
    <section id="challenges-screen" class="screen hidden">
        <h2>Quais são suas maiores dificuldades?</h2>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Falta de prática"> 🗣️ Falta de prática
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Medo de falar"> 😰 Medo de falar
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Pronúncia"> 📢 Pronúncia
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Ouvir e entender"> 🎧 Ouvir e entender
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Vocabulário"> 📚 Vocabulário
        </div>
        <button onclick="saveCheckboxes('challenges')">Continuar</button>
    </section>

    <!-- 6. Personalized Videos (Web Stories) -->
    <section id="video-stories-screen" class="screen hidden">
        <video id="story-video" autoplay muted></video>
        <div id="video-progress-container"></div>
    </section>

    <!-- 7. Personalized Summary -->
    <section id="summary-screen" class="screen hidden">
        <h2>Vamos construir seu plano, <span id="summary-name"></span>!</h2>
        <div id="summary-content"></div>
        <button onclick="nextScreen('celebration-video-screen')">Continuar</button>
    </section>

    <!-- 8. Celebration -->
    <section id="celebration-video-screen" class="screen hidden">
        <video src="assets/videos/celebration.mp4" autoplay></video>
        <button onclick="finishOnboarding()">Acessar Plataforma</button>
    </section>

    <script>
    let userResponses = {};
    let currentStep = 0;
    const totalSteps = 8;

    function nextScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => screen.classList.add('hidden'));
        document.getElementById(screenId).classList.remove('hidden');
        updateProgress();
        window.scrollTo(0, 0);
    }

    function updateProgress() {
        const progress = ((currentStep + 1) / totalSteps) * 100;
        document.querySelector('.progress-bar').style.width = `${progress}%`;
        currentStep++;
    }

    function saveCheckboxes(question) {
        const checkedOptions = document.querySelectorAll(`#${question}-screen input[type="checkbox"]:checked`);
        if (checkedOptions.length === 0) {
            alert("Por favor, selecione pelo menos uma opção.");
            return;
        }
        userResponses[question] = Array.from(checkedOptions).map(cb => cb.value);
        if (question === 'challenges') {
            loadVideoStories();
            nextScreen('video-stories-screen');
        } else {
            nextScreen('challenges-screen');
        }
    }

    function loadVideoStories() {
        const videoMap = {
            "Falta de prática": "assets/videos/practice.mp4",
            "Medo de falar": "assets/videos/fear.mp4",
            "Pronúncia": "assets/videos/pronunciation.mp4",
            "Ouvir e entender": "assets/videos/listening.mp4",
            "Vocabulário": "assets/videos/vocabulary.mp4"
        };

        const selectedVideos = userResponses['challenges'].map(challenge => videoMap[challenge]);
        let currentVideoIndex = 0;
        const videoElement = document.getElementById('story-video');

        function playVideo(index) {
            if (index >= selectedVideos.length) {
                nextScreen('summary-screen');
                return;
            }

            videoElement.src = selectedVideos[index];
            videoElement.play();
            videoElement.onclick = (e) => {
                currentVideoIndex += (e.offsetX > videoElement.clientWidth / 2) ? 1 : -1;
                currentVideoIndex = Math.max(0, currentVideoIndex);
                playVideo(currentVideoIndex);
            };
            videoElement.onended = () => playVideo(++currentVideoIndex);
        }
        playVideo(currentVideoIndex);
    }

    function finishOnboarding() {
        window.location.href = "https://goodstart.com.br";
    }
    </script>
</body>
</html>
