<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding Goodstart+</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="overflow-y:hidden;">


    <!-- 🚀 Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar"></div>
    </div>
    
    <!-- 0. Tela Inicial -->
<section id="start-screen" class="screen">
    <img src="assets/images/trust-banner.png" alt="Bem-vindo" id="trust-banner">
    <button id="start-button" onclick="startOnboarding()">Iniciar</button>
</section>


    <!-- 1. Intro Video -->
    <section id="intro-video-screen" class="screen">
        <video id="intro-video" src="assets/videos/intro-vid1.mp4" autoplay muted></video>

        <button id="continue-intro" onclick="nextScreen('name-screen')">Continuar</button>
    </section>

    <!-- 2. Name Input -->
    <section id="name-screen" class="screen hidden">
        <h2>Qual é o seu nome?</h2>
        <input type="text" id="user-name" placeholder="Digite seu nome">
        <button onclick="saveName()">Continuar</button>
    </section>

    <!-- 3. Age Selection -->
    <section id="age-screen" class="screen hidden">
        <h2>Quantos anos você tem?</h2>
        <button onclick="saveAnswer('idade', '<18')">Menos de 18</button>
        <button onclick="saveAnswer('idade', '18-25')">18-25</button>
        <button onclick="saveAnswer('idade', '26-35')">26-35</button>
        <button onclick="saveAnswer('idade', '36-45')">36-45</button>
        <button onclick="saveAnswer('idade', '46-60')">46-60</button>
        <button onclick="saveAnswer('idade', '60+')">60+</button>
    </section>

    <!-- 4. Study Method -->
    <section id="study-method-screen" class="screen hidden">
        <h2>Como você estudou inglês?</h2>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Ensino Fundamental/Médio">
            🎒 Ensino Fundamental/Médio
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Escola de Idiomas">
            🎓 Escola de Idiomas
        </div>


        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Professor Particular">
            👨‍🏫 Professor Particular
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Aplicativos">
            📱 Aplicativos
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Intercâmbio">
            🌍 Intercâmbio
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Autodidata">
            📖 Autodidata
        </div>
        <div class="checkbox-option" onclick="toggleCheckbox(this)">
            <input type="checkbox" value="Nunca estudou antes">
            ❌ Nunca estudou antes
        </div>







        
        <button onclick="saveCheckboxes('study-method')">Continuar</button>
    </section>

    <!-- 4.5. Você está em boas mãos -->
<section id="trust-screen" class="screen hidden">
    <img src="assets/images/trust-banner.png" alt="Você está em boas mãos" style="width:100vw; height:100vh; object-fit:cover;">
    <button onclick="nextScreen('challenges-screen')" style="position:absolute; bottom:10%; left:50%; transform:translateX(-50%); padding:15px 30px; background-color:#E50914; color:#fff; border:none; border-radius:25px; font-size:16px; font-weight:bold; cursor:pointer;">Continuar</button>
</section>

<!-- 5. Challenges -->
<section id="challenges-screen" class="screen hidden">
    <h2>Quais são suas maiores dificuldades?</h2>
    <div class="checkbox-option" onclick="toggleCheckbox(this)">
        <input type="checkbox" value="Falta de prática"> 🗣️ Falta de prática
    </div>
    <div class="checkbox-option" onclick="toggleCheckbox(this)">
        <input type="checkbox" value="Medo de falar"> 😰 Medo de falar
    </div>
    <div class="checkbox-option" onclick="toggleCheckbox(this)">
        <input type="checkbox" value="Pronúncia"> 📢 Pronúncia
    </div>
    <div class="checkbox-option" onclick="toggleCheckbox(this)">
        <input type="checkbox" value="Ouvir e entender"> 🎧 Ouvir e entender
    </div>
    <div class="checkbox-option" onclick="toggleCheckbox(this)">
        <input type="checkbox" value="Vocabulário"> 📚 Vocabulário
    </div>
    <button onclick="saveCheckboxes('challenges')">Continuar</button>
</section>


    <!-- 6. Personalized Videos with Web Stories Effect -->
<section id="personalized-videos-screen" class="screen hidden">
    <div id="video-progress-container"></div>
    <div id="video-container" onclick="handleVideoTap(event)"></div>
</section>

    <!-- 7. Personalized Summary -->
<section id="summary-screen" class="screen hidden">
    <h2 id="summary-heading"></h2>
    <div id="summary-content"></div>
    <button onclick="nextScreen('expectation-screen')">Continuar</button>
</section>

<!-- 7. Personalized Summary -->
<section id="summary-screen" class="screen hidden">
    <h2 id="summary-heading"></h2>
    <div id="summary-content"></div>
    <button onclick="nextScreen('expectation-screen')">Continuar</button>
</section>

<!-- 8. O que você pode esperar -->
<section id="expectation-screen" class="screen hidden">
    <h2>O que você pode esperar</h2>
    <div class="carousel">
        <div class="carousel-slide active">
            <h3>Semana 1</h3>
            <p><strong>105</strong> novas palavras</p>
            <img src="assets/images/week1.png" alt="Semana 1">
            <p><em>Aprenda a conhecer novas pessoas</em></p>
        </div>
        <div class="carousel-slide">
            <h3>Semana 4</h3>
            <p><strong>144</strong> novas frases</p>
            <img src="assets/images/week1.png" alt="Semana 4">
            <p><em>Aprenda a pedir em um restaurante</em></p>
        </div>
        <div class="carousel-slide">
            <h3>Semana 12</h3>
            <p><strong>1080</strong> minutos de fala</p>
            <img src="assets/images/week1.png" alt="Semana 12">
            <p><em>Aprenda a falar com um amigo</em></p>
        </div>
        <div class="carousel-slide">
            <h3>Mês 12</h3>
            <p><strong>Fale com confiança</strong></p>
            <img src="assets/images/week1.png" alt="Mês 12">
            <p><em>Fale em diferentes situações</em></p>
        </div>
    </div>
    <div class="carousel-indicators">
        <span class="dot active" onclick="moveCarousel(0)"></span>
        <span class="dot" onclick="moveCarousel(1)"></span>
        <span class="dot" onclick="moveCarousel(2)"></span>
        <span class="dot" onclick="moveCarousel(3)"></span>
    </div>
    <button id="carousel-button" onclick="nextCarouselSlide()">Próximo</button>
</section>

    <!-- 9. Celebration -->
<section id="celebration-video-screen" class="screen hidden">
    <video id="celebration-video" playsinline>
    <source src="assets/videos/celebration.webm" type="video/webm">
    <source src="assets/videos/celebration.mp4" type="video/mp4">
    Seu navegador não suporta vídeos.
</video>

  
    <button id="celebration-button" onclick="finalizarOnboarding()">Começar minha jornada</button>
</section>


<script src="script.js"></script>
   
<script>
    function finalizarOnboarding() {
        // 📤 Envia os dados reais para o Uncanny Automator
        sendUserDataToUncannyAutomator();

        // 📢 Continua avisando o outro sistema que o onboarding terminou
        window.parent.postMessage('closeOnboarding', 'https://cursos.goodstart.com.br');

        // 🚀 Redireciona o usuário após o envio
        setTimeout(() => {
            window.location.href = "https://cursos.goodstart.com.br";
        }, 1000); // Aguarda 1 segundo para garantir o envio
    }
</script>







<script>
 // ⚡ Enviar dados para a OpenAI e depois para o Uncanny Automator
async function sendUserDataToUncannyAutomator() {
    const webhookURL = 'https://app.goodstart.com.br/wp-json/uap/v2/uap-56907-56908';
    const openAIURL = 'https://api.openai.com/v1/chat/completions';
    const openAIKey = 'Bearer SUA_CHAVE_OPENAI';  // Substitua pela sua chave da OpenAI

    // 🎯 Validação de dados
    if (!userResponses['nome'] || !userResponses['idade']) {
        alert('⚠️ Por favor, preencha todas as informações antes de continuar.');
        return;
    }

    const userData = {
        nome: userResponses['nome'],
        idade: userResponses['idade'],
        estudo: userResponses['study-method'] ? userResponses['study-method'].join(', ') : 'Não informado',
        dificuldades: userResponses['challenges'] ? userResponses['challenges'].join(', ') : 'Não informado'
    };

    try {
        // 📤 Exibe carregamento
        document.body.style.cursor = 'wait';

        // 🔥 Envia os dados para a OpenAI para gerar o e-mail personalizado
        const aiResponse = await fetch(openAIURL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': openAIKey
            },
            body: JSON.stringify({
                model: 'gpt-4o-mini',
                messages: [
                    {
                        role: 'system',
                        content: 'Você é um assistente que escreve e-mails personalizados para alunos de inglês.'
                    },
                    {
                        role: 'user',
                        content: `Nome: ${userData.nome}, Idade: ${userData.idade}, Estudo: ${userData.estudo}, Dificuldades: ${userData.dificuldades}. Escreva um e-mail com dicas de como melhorar o inglês.`
                    }
                ],
                max_tokens: 500
            })
        });

        if (!aiResponse.ok) {
            throw new Error(`Erro na resposta da OpenAI: ${aiResponse.statusText}`);
        }

        const aiData = await aiResponse.json();
        const respostaOpenAI = aiData.choices[0].message.content;

        // 🔄 Envia a resposta gerada pela OpenAI para o Webhook do Uncanny Automator
        await fetch(webhookURL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                nome: userData.nome,
                idade: userData.idade,
                estudo: userData.estudo,
                dificuldades: userData.dificuldades,
                resposta: respostaOpenAI  // Incluindo a resposta da OpenAI
            })
        });

        // ✅ Feedback de sucesso
        alert('✅ E-mail personalizado enviado com sucesso!');
    } catch (error) {
        console.error('❌ Erro ao enviar dados:', error);
        alert('❌ Ocorreu um erro ao enviar os dados. Tente novamente mais tarde.');
    } finally {
        // 🔄 Restaura o cursor
        document.body.style.cursor = 'default';
    }
}

</script>


</body>
</html>
